<!DOCTYPE html><html><head><meta charset="utf-8"><title>【IC】Faraday60 - A QMK-compatible Topre HHKB Pro replacement PCB | KeyboardDaily</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="keywords" content="Gondolindrim"><meta name="description" content="类型: IC作者: Gondolindrim发布时间: 2020-03-08 04:26:36更新时间: 2020-09-03 08:40:05原链接: https:&#x2F;&#x2F;geekhack.org&#x2F;index.php?topic&#x3D;105035.0"><meta property="og:type" content="article"><meta property="og:title" content="【IC】Faraday60 - A QMK-compatible Topre HHKB Pro replacement PCB"><meta property="og:url" content="https://keyboarddaily.github.io/geekhack/ic/105035.html"><meta property="og:site_name" content="KeyboardDaily"><meta property="og:description" content="类型: IC作者: Gondolindrim发布时间: 2020-03-08 04:26:36更新时间: 2020-09-03 08:40:05原链接: https:&#x2F;&#x2F;geekhack.org&#x2F;index.php?topic&#x3D;105035.0"><meta property="og:locale"><meta property="og:image" content="https://keyboarddaily.oss-cn-shanghai.aliyuncs.com/geekhack/105035/dEnO5en.png?x-oss-process=style/keyboarddaily"><meta property="article:published_time" content="2020-03-07T20:26:36.000Z"><meta property="article:modified_time" content="2020-09-03T00:40:05.000Z"><meta property="article:author" content="KeyboardDaily"><meta property="article:tag" content="Gondolindrim"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://keyboarddaily.oss-cn-shanghai.aliyuncs.com/geekhack/105035/dEnO5en.png?x-oss-process=style/keyboarddaily"><link rel="alternate" href="/atom.xml" title="KeyboardDaily" type="application/atom+xml"><link rel="icon" href="/css/images/favicon.ico"><link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css"><link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"><style type="text/css">@font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal}@font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal}@font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal}@font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic}</style><link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all"><link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all"><link rel="stylesheet" href="/css/style.css"><script src="/js/jquery-3.1.1.min.js"></script><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/fashion.css"><link rel="stylesheet" href="/css/glyphs.css"><meta name="generator" content="Hexo 5.4.0"></head><body data-spy="scroll" data-target="#toc" data-offset="50"><header id="allheader" class="site-header" role="banner"><div class="clearfix container"><div class="site-branding"><h1 class="site-title"><a href="/" title="KeyboardDaily" rel="home">KeyboardDaily</a></h1><div class="site-description">有态度的客制化键盘资讯，帮你花好每一分钱</div><nav id="main-navigation" class="main-navigation" role="navigation"><a class="nav-open">Menu</a> <a class="nav-close">Close</a><div class="clearfix sf-menu"><ul id="main-nav" class="menu sf-js-enabled sf-arrows" style="touch-action:pan-y"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="/"><a href="/">首页</a></li><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="archives"><a href="/archives">归档</a></li><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="categories"><a href="/categories">分类</a></li><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="tags"><a href="/tags">合集</a></li><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="about"><a href="/about">关于</a></li></ul></div></nav></div></div></header><div id="container"><div id="wrap"><div id="content" class="outer"><section id="main" style="float:none"><article id="post-105035" style="width:66%;float:left" class="article article-type-post" itemscope itemprop="blogPost"><div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template"><div class="article-gallery"><div class="article-gallery-photos"><a class="article-gallery-img fancybox" target="_blank" href="https://keyboarddaily.oss-cn-shanghai.aliyuncs.com/geekhack/105035/dEnO5en.png?x-oss-process=style/keyboarddaily" rel="gallery_cl0xipawo01vh4ktz3ztk5ufv noopener"><img src="https://keyboarddaily.oss-cn-shanghai.aliyuncs.com/geekhack/105035/dEnO5en.png?x-oss-process=style/keyboarddaily" itemprop="image"></a></div></div><header class="article-header"><h1 class="thumb" class="article-title" itemprop="name">【IC】Faraday60 - A QMK-compatible Topre HHKB Pro replacement PCB</h1></header><div class="article-meta"><a href="/geekhack/ic/105035.html" class="article-date"><time datetime="2020-03-07T20:26:36.000Z" itemprop="datePublished">March 8, 2020</time> </a><span class="ico-folder"></span> <a class="article-category-link" href="/categories/IC/">IC</a>, <a class="article-category-link" href="/categories/IC/%E9%94%AE%E7%9B%98/">键盘</a>, <a class="article-category-link" href="/categories/IC/%E9%94%AE%E7%9B%98/60/">60</a> <span id="busuanzi_container_page_pv">本文总阅读量<span id="busuanzi_value_page_pv"></span>次</span></div><div class="article-entry" itemprop="articleBody"><p>类型: IC<br>作者: <a href="/tags/Gondolindrim/">Gondolindrim</a><br>发布时间: 2020-03-08 04:26:36<br>更新时间: 2020-09-03 08:40:05<br>原链接: <a target="_blank" rel="noopener" href="https://geekhack.org/index.php?topic=105035.0">https://geekhack.org/index.php?topic=105035.0</a></p><span id="more"></span><hr><p>Hey there guys!<br>I’m Gondolindrim, a brazilian engineer and mech enthusiast. I am known for my keyboard PCB projects, specially my open-source ones under the <a target="_blank" rel="noopener" href="http://gondolindrim.github.io/AcheronDocs">Acheron Project</a>. These include the SharkPCB, ArcticPCB, Doddle60, Austin, Tsuki and some more.<br>Today I want to present you my newest project: the Faraday60!<br><a target="_blank" rel="noopener" href="https://keyboarddaily.oss-cn-shanghai.aliyuncs.com/geekhack/105035/dEnO5en.png?x-oss-process=style/keyboarddaily"><img src="https://keyboarddaily.oss-cn-shanghai.aliyuncs.com/geekhack/105035/dEnO5en.png?x-oss-process=style/keyboarddaily"></a><br><strong>The problem</strong><br>At this point most users of the community know of <a target="_blank" rel="noopener" href="https://deskthority.net/wiki/Topre_switch">Topre switches</a> – rubber-dome switches that use capacitive coupling for their activation effect. These switches are very unique and are known to be very good and pleasant to use; nonetheless, they are pretty scarce in our community, for a couple of reasons.</p><ul><li><p>First, the unique physical nature of the capacitive activation makes Topre really hard to integrate into QMK because it is specifically designed for contact-based switches; there are no everlasting efforts to make the Topre switches QMK compatible and none of the existent were widely adopted by the community for one reason or another. The most promising one (<a target="_blank" rel="noopener" href="https://deskthority.net/viewtopic.php?f=7&t=11734">this one</a>) apparently worked but no further information came from it since almost an year ago.</p></li><li><p>Second, the actual circuitry needed to operate Topre switches is quite nasty. I have got a hold of a Leopold keyboard and was able to reverse-engineer it. The sensing circuit is very rudimentary and uses resistive factors and exponential decays to measure the switch activation. This process is heavily dependent on tolerances and routing the PCB is a pain because, since the sensing is done only by passive components, noise is a major issue and can affect the typing experience. The digital circuitry, on the other hand, is overly complicated, using multiplexers to sweep columns and making the sensing and digital circuits not isolated, being coupled gavanically, generating LOTS of problems.</p></li><li><p>Third, despite Topre switches being famous for their unique feel (a “snappy” tactility) most of the community will stay away from them because the keyboards that use them – Realforces, HHKBs and Leopolds – range in the 250 dollar mark. Despite the price tag, these keyboards don’t feature many of the qualities that we use custom keyboards for in the first place – programmability, simplicity, good construction, customizability. There is the Hasu controller, designed by the legendary Hasu designer, which gives other nice features like bluetooth, but costs itself close to eighty dollars on top of the 200-something the keyboard goes for.</p></li><li><p>Fourth, the Topre keyboards <em>simply don’t feel like 250 dollar keyboards</em>. For instance, Topres do not have a good construction quality; my HHKB does not feel cheap, but for 250 dollars I can get a pretty darn good feeling aluminum mechanical keyboard. Leopolds have a nice steel plate, have good construction and good keycaps, but still feel “plasticky” and their sound is not the best. Realforces, well… they are the best of the three, but yet people miss that metallic case feel. The Norbaforce exists for a reason. <em><strong>There you go, TopClack, I redid my words. Realforces are good, I said it. Now we want more roleplay from you guys on stream. Call me when you want me there.</strong></em><br>These reasons leave a bad taste in everyone’s mouths; the Topre users hardly have support from the community – replacement parts are scarce and expensive when available – and the people that want to use Topre feel compelled not to.</p></li><li><p><em>Gondo to the rescue*</em><br>To make a long story short, I have found a way to make Topre switches QMK compatible using simple and affordable sensing circuitry.<br>The circuit I designed, while being simple, fulfills industry-level requirements for user safety and signal integrity: the analog sensing is precise and based on active circuits; the analog and digital circuitry are completely isolated with optocouplers; the design is simple, allowing for customizability and, most important of all, able to be integrated into QMK, and can use both ATMEGA and ARM controllers.<br>The nice thing here is that this makes the PCB able to integrate all the QMK features we love and adore <em>(RGB Topre maybe?)</em>. It also allows us to build native bluetooth into the PCB without the need for an extra controller.<br>My new design also allows for two very cool features we always wanted in mechanical keyboards: <strong>the switch activation level can be firmware-adjusted</strong> and <strong>every key can be configured to be used as an analog level input.</strong> This means that we can make the microcontroller read the strength of the switch press (in particular switches) and make use of that.</p></li><li><p><em>The Faraday60</em>*<br>Currently the method is in design stage, but I have made small-scale one-switch protos and used electronic simulation programs to test the concepts and everything shows it works wonderfully. The first real project I want to make is an HHKB Pro 2 replacement PCB. I am currently designing the PCB. I’m aiming for the best here: ESD protection, ARM MCU, VIA compatibility, the whole nine yards.<br>Once a fully working prototype is confirmed, it is going to be available for purchase through CannonKeys.<br>I have documented the whole design process and will make it available for everyone that wishes to use the technology to make custom Topre PCBs. All calculations, components, numbers and important thoughts. I will also make the Faraday60 open-source after some time.<br>The design calculations and procedures are described in the <a target="_blank" rel="noopener" href="https://acheronproject.com/faraday/principle.html">Faraday documentation</a>. As of today (march 8th 2020) it’s pretty incomplete and I’m writing it as I can.</p></li><li><p><em>What I need feedback on</em>*<br>And here is the actual IC part. Before going full MacGyver in this, I need to know a few design parameters from the community.</p></li><li><p>First, I need to know if there is interest for this kind of PCB – a QMK compatible HHKB Pro 2 replacement PCB.</p></li><li><p>Second, I need an input on the features we are going to put there. The first idea is to make a simple PCB that can operate Topre and replace the USB hub with a common USB2.0 hub.</p></li><li><p>However, we are also able to add native bluetooth and a very nice USB3.1 hub in there; these will ramp prices up because the bluetooth controller alone costs 9 dollars, and the USB3.1 hub controller almost 15. So our idea is to make a first operating version and, futurely, an “ultimate” version will all the big boi features. In this sense, I need to know if you guys agree with this or definitely want a first PCB with bluetooth or 3.1 USB or both.</p></li><li><p>Of course, if you guys would like to see other features here that i haven’t listed, please write them down.<br>Finally, I want a target price you guys would be comfortable to pay for an HHKB replacement PCB. I know this is not ideal but this PCB will not be cheap as a DZ60 and, as you have seen, there is a serious tradeoff between features and price here.</p></li><li><p><em>Acknowledgements</em>*</p></li></ul><ul><li>Upas, who runs CannonKeys, for the support and being an awesome person</li><li>The Off the Clack dudes – Josh, Danny and Chris – for their awesomeness and the fact they let me market my ideas there, including the Faraday;</li><li>My mom, because I love her;</li><li>MrKeebs, brother-in-keyboards and good friend. Long live MrKeebs!</li><li>Tzarc, who helped immensely during the design stages, specially in the design of the electrocapacitive pads footprints</li><li>Jae and Quakemz from TopClack for their support and feedback!</li><li>Man of Interests for his support and encouragement!</li></ul></div><footer class="entry-meta entry-footer"><span class="ico-folder"></span> <a class="article-category-link" href="/categories/IC/">IC</a>, <a class="article-category-link" href="/categories/IC/%E9%94%AE%E7%9B%98/">键盘</a>, <a class="article-category-link" href="/categories/IC/%E9%94%AE%E7%9B%98/60/">60</a> <span class="ico-tags"></span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Gondolindrim/" rel="tag">Gondolindrim</a></li></ul><div id="comment"><div id="lv-container" data-id="city" data-uid="MTAyMC8yOTQ4MS82MDQ5"><script type="text/javascript">!function(e,t){var n,c=e.getElementsByTagName(t)[0];"function"!=typeof LivereTower&&((n=e.createElement(t)).src="https://cdn-city.livere.com/js/embed.dist.js",n.async=!0,c.parentNode.insertBefore(n,c))}(document,"script")</script><noscript>为正常使用来必力评论功能请激活JavaScript</noscript></div></div></footer><hr class="entry-footer-hr"></div><nav id="article-nav"><a href="/geekhack/ic/105038.html" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">上一篇</strong><div class="article-nav-title">【IC】Solderless adapter socket for HC-xx, HM-xx BT modules (breadboard, Arduino)</div></a><a href="/geekhack/ic/105034.html" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">下一篇</strong><div class="article-nav-title">【IC】GMK Orchid</div></a></nav></article><aside id="sidebar"><div id="toc" class="toc-article"><strong class="toc-title">文章目录</strong><ol class="nav">无</ol></div></aside></section></div></div><footer id="footer" class="site-footer"><div class="clearfix container"><div class="site-info">&copy; 2022 KeyboardDaily All Rights Reserved. <span id="icp_info"><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/">沪ICP备2021016355号</a></span><br><span id="busuanzi_container_site_uv">本站访客数<span id="busuanzi_value_site_uv"></span>人次 本站总访问量<span id="busuanzi_value_site_pv"></span>次</span></div><div class="site-credit">Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hipaper" target="_blank">hipaper</a></div></div></footer><script>var wrapdiv=document.getElementById("wrap"),contentdiv=document.getElementById("content");wrapdiv.style.minHeight=document.body.offsetHeight-document.getElementById("allheader").offsetHeight-document.getElementById("footer").offsetHeight+"px",contentdiv.style.minHeight=document.body.offsetHeight-document.getElementById("allheader").offsetHeight-document.getElementById("footer").offsetHeight+"px"</script><div style="display:none"><script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script></div><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><link rel="stylesheet" href="/fancybox/jquery.fancybox.css"><script src="/fancybox/jquery.fancybox.pack.js"></script><script src="/js/script.js"></script><script src="/js/bootstrap.js"></script><script src="/js/main.js"></script><div style="display:none"><script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script></div><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><a id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js" async></script></body></html>