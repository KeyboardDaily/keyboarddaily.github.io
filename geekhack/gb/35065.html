<!DOCTYPE html><html><head><meta charset="utf-8"><title>【GB】Filco tenkeyless custom ATmega32u4 controller - All gone, that&#39;s it folks. | KeyboardDaily</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="类型: GB作者: bpiphany发布时间: 2012-08-28 05:25:09更新时间: 2013-07-02 02:53:05原链接: https:&#x2F;&#x2F;geekhack.org&#x2F;index.php?topic&#x3D;35065.0"><meta property="og:type" content="article"><meta property="og:title" content="【GB】Filco tenkeyless custom ATmega32u4 controller - All gone, that&#39;s it folks."><meta property="og:url" content="https://keyboarddaily.github.io/geekhack/gb/35065.html"><meta property="og:site_name" content="KeyboardDaily"><meta property="og:description" content="类型: GB作者: bpiphany发布时间: 2012-08-28 05:25:09更新时间: 2013-07-02 02:53:05原链接: https:&#x2F;&#x2F;geekhack.org&#x2F;index.php?topic&#x3D;35065.0"><meta property="og:locale"><meta property="og:image" content="https://keyboarddaily.oss-cn-shanghai.aliyuncs.com/geekhack/35065/6497.png?x-oss-process=style/keyboarddaily"><meta property="article:published_time" content="2012-08-27T21:25:09.000Z"><meta property="article:modified_time" content="2013-07-01T18:53:05.000Z"><meta property="article:author" content="KeyboardDaily"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://keyboarddaily.oss-cn-shanghai.aliyuncs.com/geekhack/35065/6497.png?x-oss-process=style/keyboarddaily"><link rel="alternate" href="/atom.xml" title="KeyboardDaily" type="application/atom+xml"><link rel="icon" href="/css/images/favicon.ico"><link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css"><link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"><style type="text/css">@font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal}@font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal}@font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal}@font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic}</style><link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all"><link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all"><link rel="stylesheet" href="/css/style.css"><script src="/js/jquery-3.1.1.min.js"></script><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/fashion.css"><link rel="stylesheet" href="/css/glyphs.css"><meta name="generator" content="Hexo 5.4.0"></head><body data-spy="scroll" data-target="#toc" data-offset="50"><div class="site-header-image"><img id="originBg" width="100%" alt="Hike News" src=""></div><div id="header-blur" class="site-header-image blur" style="position:absolute;top:0;height:207px;min-height:207px;min-width:100%"><img id="blurBg" width="100%" style="top:96%" alt="Hike News" src=""></div><script>var imgUrls="css/images/pose01.jpg,https://source.unsplash.com/collection/954550/1920x1080,https://source.unsplash.com/collection/954550/1920x1081".split(","),random=Math.floor(Math.random()*imgUrls.length);imgUrls[random].startsWith("http")||0<=imgUrls[random].indexOf("://")?(document.getElementById("originBg").src=imgUrls[random],document.getElementById("blurBg").src=imgUrls[random]):(document.getElementById("originBg").src="/"+imgUrls[random],document.getElementById("blurBg").src="/"+imgUrls[random])</script><header id="allheader" class="site-header" role="banner" style="width:100%;position:absolute;top:0;background:rgba(255,255,255,.8)"><div class="clearfix container"><div class="site-branding"><h1 class="site-title"><a href="/" title="KeyboardDaily" rel="home">KeyboardDaily</a></h1><div class="site-description">沪ICP备2021016355号</div><nav id="main-navigation" class="main-navigation" role="navigation"><a class="nav-open">Menu</a> <a class="nav-close">Close</a><div class="clearfix sf-menu"><ul id="main-nav" class="menu sf-js-enabled sf-arrows" style="touch-action:pan-y"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="/"><a href="/">首页</a></li><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="archives"><a href="/archives">归档</a></li><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="categories"><a href="/categories">分类</a></li><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="tags"><a href="/tags">合集</a></li><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="about"><a href="/about">关于</a></li></ul></div></nav></div></div></header><div id="container"><div id="wrap"><div id="content" class="outer"><section id="main" style="float:none"><article id="post-35065" style="width:66%;float:left" class="article article-type-post" itemscope itemprop="blogPost"><div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template"><div class="article-gallery"><div class="article-gallery-photos"><a class="article-gallery-img fancybox" target="_blank" href="https://keyboarddaily.oss-cn-shanghai.aliyuncs.com/geekhack/35065/6497.png?x-oss-process=style/keyboarddaily" rel="gallery_cl0xiply4080c4ktzcekh1xsq noopener"><img src="https://keyboarddaily.oss-cn-shanghai.aliyuncs.com/geekhack/35065/6497.png?x-oss-process=style/keyboarddaily" itemprop="image"></a></div></div><header class="article-header"><h1 class="thumb" class="article-title" itemprop="name">【GB】Filco tenkeyless custom ATmega32u4 controller - All gone, that&#39;s it folks.</h1></header><div class="article-meta"><a href="/geekhack/gb/35065.html" class="article-date"><time datetime="2012-08-27T21:25:09.000Z" itemprop="datePublished">August 28, 2012</time> </a><span class="ico-folder"></span> <a class="article-category-link" href="/categories/GB/">GB</a>, <a class="article-category-link" href="/categories/GB/%E5%85%B6%E4%BB%96/">其他</a> <span id="busuanzi_container_page_pv">本文总阅读量<span id="busuanzi_value_page_pv"></span>次</span></div><div class="article-entry" itemprop="articleBody"><p>类型: GB<br>作者: bpiphany<br>发布时间: 2012-08-28 05:25:09<br>更新时间: 2013-07-02 02:53:05<br>原链接: <a target="_blank" rel="noopener" href="https://geekhack.org/index.php?topic=35065.0">https://geekhack.org/index.php?topic=35065.0</a></p><span id="more"></span><hr><p><a target="_blank" rel="noopener" href="https://keyboarddaily.oss-cn-shanghai.aliyuncs.com/geekhack/35065/6497.png?x-oss-process=style/keyboarddaily"><img src="https://keyboarddaily.oss-cn-shanghai.aliyuncs.com/geekhack/35065/6497.png?x-oss-process=style/keyboarddaily" alt="6497-0" title="[GB] Filco tenkeyless custom ATmega32u4 controller - All gone, that&#39;s it folks."></a><br>Image courtesy of fruktstund (at least I hope that is ok..)<br>Wiki page with instructions <a target="_blank" rel="noopener" href="http://deskthority.net/wiki/HID_Liberation_Device_-_Instructions">http://deskthority.net/wiki/HID_Liberation_Device_-_Instructions</a><br>Solder yourself instruction <a target="_blank" rel="noopener" href="http://deskthority.net/wiki/HID_Liberation_Device_-_DIY_Instructions">http://deskthority.net/wiki/HID_Liberation_Device_-_DIY_Instructions</a><br>Please contribute there if you have information to share =)<br><strong>What is this all about?</strong><br>Ever wanted your Filco tenkeyless to have a programmable controller? Thought it sounded a bit insane to build a Phantom only for this reason? What if you could just simply replace the stock controller daughter board in your keyboard with a programmable one? Why not I say.<br>With this replacement daughter board you will basically have a Teensy that plugs conveniently into your Filco tenkeyless. There are a number of different keyboard project with code running on the Teensy that should be easily adopted to work with this controller.<br><strong>The ATmega32u4 chip</strong><br>This is the same chip as on the Teensy2.0. It is a 16MHz 8-bit AVR from Atmel.<br>It has 32kB of flash to hold the bootloader, firmware code and key matrix information. The flash memory is read only during normal operation, so it can only be altered when loading code onto it through the bootloader. Both the stock bootloader from Atmel and the open source bootloader from LUFA take 4kB of the flash memory. The very basic code for the Phantom with one single layer key matrix takes almost 9kB. This leaves more than 18kB for custom layers and macros or whatever.<br>There is 2.5kB of SRAM memory, this is used to run the program and store variables during runtime. It is like normal RAM memory erased when the power is cut.<br>There is also 1kB of EEPROM memory available, this can be used to store data when the power is off. So any recorded macro or on the fly remappings should be stored here.<br><strong>Flashing the firmware</strong><br>Almost all code for AVRs you will find is written in c and compiled to <em>hex</em> files. It is these hex files that are flashed to the chip. The flashing is done through a program running on your computer, talking to the chip via the bootloader. I haven’t tried this in Windows but there are applications to do this that should be easily maneuvered. I will look into this and make sure there are no problems. In Linux I’ve got everything under control.<br>The TeensyLoader that the Teensys use will unfortunately not be available since that is PJRC proprietary. This is only a slight drawback. It may be more user friendly, and their bootloader is much smaller, but all in all this doesn’t make a big difference.<br><strong>Compatibility</strong><br>I have based this design on my “gen2” Filco tenkeyless. I believe there are no differences compared to the “gen1” keyboard except the higher quality PCB. Electrically everything is the same. I cannot guarantee that it will work for everyone though since there may be differences I don’t know about. If your keyboard turns out to be incompatible this would of course be handled somehow. Passing it on to someone else for example, or in the worst case returning it for a refund.<br>The Filco main PCB that I have reverse engineered is a “gen2” marked “CST-F87/88/89/91-MB V1.1” 2010-11-09, and the controller is marked “Tenkeyless PCBA Rev 2.1-ESD” 2010-08-24.<br>There are pictures of the stock controller in this thread <a target="_blank" rel="noopener" href="http://geekhack.org/index.php?topic=6557">http://geekhack.org/index.php?topic=6557</a></p></div><footer class="entry-meta entry-footer"><span class="ico-folder"></span> <a class="article-category-link" href="/categories/GB/">GB</a>, <a class="article-category-link" href="/categories/GB/%E5%85%B6%E4%BB%96/">其他</a><div id="comment"><div id="lv-container" data-id="city" data-uid="MTAyMC8yOTQ4MS82MDQ5"><script type="text/javascript">!function(e,t){var n,c=e.getElementsByTagName(t)[0];"function"!=typeof LivereTower&&((n=e.createElement(t)).src="https://cdn-city.livere.com/js/embed.dist.js",n.async=!0,c.parentNode.insertBefore(n,c))}(document,"script")</script><noscript>为正常使用来必力评论功能请激活JavaScript</noscript></div></div></footer><hr class="entry-footer-hr"></div><nav id="article-nav"><a href="/geekhack/gb/35143.html" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">上一篇</strong><div class="article-nav-title">【SHIPPING】 DDR Arrows | Poker Modifiers Group Buy</div></a><a href="/geekhack/gb/35064.html" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">下一篇</strong><div class="article-nav-title">cherry replica on grey|blue keys GB</div></a></nav></article><aside id="sidebar"><div id="toc" class="toc-article"><strong class="toc-title">文章目录</strong><ol class="nav">无</ol></div></aside></section></div></div><footer id="footer" class="site-footer"><div class="clearfix container"><div class="site-info">&copy; 2022 KeyboardDaily All Rights Reserved. <span id="busuanzi_container_site_uv">本站访客数<span id="busuanzi_value_site_uv"></span>人次 本站总访问量<span id="busuanzi_value_site_pv"></span>次</span></div><div class="site-credit">Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hipaper" target="_blank">hipaper</a></div></div></footer><script>var wrapdiv=document.getElementById("wrap"),contentdiv=document.getElementById("content");wrapdiv.style.minHeight=document.body.offsetHeight-document.getElementById("allheader").offsetHeight-document.getElementById("footer").offsetHeight+"px",contentdiv.style.minHeight=document.body.offsetHeight-document.getElementById("allheader").offsetHeight-document.getElementById("footer").offsetHeight+"px";var headerblur=document.getElementById("header-blur");headerblur.style.minHeight=window.getComputedStyle(document.getElementById("allheader"),null).height</script><div style="display:none"><script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script></div><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><link rel="stylesheet" href="/fancybox/jquery.fancybox.css"><script src="/fancybox/jquery.fancybox.pack.js"></script><script src="/js/script.js"></script><script src="/js/bootstrap.js"></script><script src="/js/main.js"></script><div style="display:none"><script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script></div><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><a id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js" async></script></body></html>